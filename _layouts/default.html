<!DOCTYPE html>
<html lang="{{ site.data.manifest.lang | default: "en-US" }}">

<head>
  <meta charset="utf-8">
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

  {% if site.data.manifest.name %}
    {% assign title = site.data.manifest.name %}
    {% if page.title and site.data.manifest.short_name %}
      {% assign title = site.data.manifest.short_name %}
    {% endif %}
  {% else %}
    {% assign title = site.title %}
  {% endif %}
  <title>{% if page.title %}{{ page.title }} | {% endif %}{{ title }}{% unless page.title %}{% if site.data.manifest.tagline %} - {{ site.data.manifest.tagline }}{% endif %}{% endunless %}</title>

  {% seo title=false %}
  {% include meta.html %}

  <link rel="alternate" type="application/rss+xml" title="{{ title }}{% if site.data.manifest.tagline %} - {{ site.data.manifest.tagline }}{% endif %}" href="{{ site.baseurl }}/feed.xml" />

  <!-- Website icon -->
  <link rel="shortcut icon" href="{{ site.baseurl}}{% if site.data.manifest.icons[0] %}{{ site.data.manifest.icons[0].src }}{% else %}{{ site.logo }}{% endif %}">

  <!-- Manifest -->
  <link rel="manifest" href="{{ site.baseurl }}/manifest.json">
  <meta name="theme-color" content="{{ site.data.manifest.theme_color | default: '#854fee' }}" />

  <!-- Material Components for Web -->
  <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
  <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>

  <!-- Icon Fonts (FontAwesome, Material Icons, etc.) -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  {% if site.icons or page.icons %}
  <script async src="https://kit.fontawesome.com/a8beec66c1.js" crossorigin="anonymous"></script>
  {% endif %}

  <!-- Stylesheets -->
  <link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/assets/styles/app.css" />
  <link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/assets/styles/style.css" />

  <!-- Installable PWA -->
  {% if site.installable %}
  <script async type="module" src="https://cdn.jsdelivr.net/npm/@pwabuilder/pwainstall@latest/dist/pwa-install.min.js"></script>
  {% endif %}

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

  {% include github_head.html %}
  {% include adsense_head.html %}
  {% include analytics_head.html %}

  <!-- Syntax Highlighting for Code Samples -->
  {% if site.syntax or page.syntax %}
  <script src="https://unpkg.com/@highlightjs/cdn-assets@latest/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad();

  </script>
  {% endif %}
</head>

<body class="layout-{{ page.layout }}{% if page.title %}  {{ page.title | slugify }}{% endif %}">
  {% include appbar.html %}

  <!-- Snackbar for showing notifications - use showSnackbar(msg) function in JS -->
  {% include snackbar.html %}

  <main class="mdc-top-app-bar--fixed-adjust">
    {% unless page.id %}
    {% include drawer.html %}
    {% endunless %}

    <!-- Content -->
    <div class="main-content">
      <article class="about-section">
        {% include page_header.html %}

        <!-- Page Content -->
        {% if page.title %}
        {{ content | replace_first: "h1", "h1 style='display: none;'" }}
        {% else %}
        {{ content }}
        {% endif %}
      </article>
      {% include footer.html %}
    </div>
  </main>

  <script>
    $(function() {
      console.log("Setting up site navigation...");
      // Instantiate toolbar
      const topAppBarEl = document.querySelector('.mdc-top-app-bar');
      const topAppBar = new mdc.topAppBar.MDCTopAppBar.attachTo(topAppBarEl);

      // Instantiate navigation drawer
      const drawerEl = document.querySelector('.mdc-drawer');
      const drawer = new mdc.drawer.MDCDrawer.attachTo(drawerEl);

      // Attach toolbar to navigation drawer
      topAppBar.setScrollTarget(document.querySelector('.main-content'));
      topAppBar.listen('MDCTopAppBar:nav', () => {
        drawer.open = !drawer.open;
      });

      console.log("Navigation setup complete!");
    });

    function back() {
      if (document.referrer.indexOf(location.protocol + "//" + location.host) === 0) {
        history.back();
      } else {
        window.location = "{{ '/' | relative_url }}";
      }
    }

    // Update last modified time in footer
    $('#last-modified').html(document.lastModified);

    // Add material classes to table of contents
    $('#toc .mdc-list-item a').addClass('mdc-list-item__text');

  </script>

  <!-- user-defined JavaScript -->
  <script async src="{{ site.baseurl }}/assets/scripts/script.js"></script>
</body>

</html>
